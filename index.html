<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encontre seu Pet - Palmas-TO</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para transpilar JSX no navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fontes e Ícones -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div id="root"></div>

    <script type="text/babel">
        // Para que o Lucide Icons funcione com React
        lucide.createIcons();

        // --- DADOS E LÓGICA DE DADOS (Simulando um backend/arquivo) ---

        // 1. Dados dos pets em formato CSV
        const csvData = `id,nome,especie,raca,cor,tamanho,fotoUrl,local,data,status
1,"Rex","cachorro","Vira-lata","Caramelo","medio","https://placehold.co/400x400/FDBF60/333333?text=Rex","Quadra 104 Sul","10/09/2025","perdido"
2,"Mimi","gato","Siamês","Branco e Marrom","pequeno","https://placehold.co/400x400/D6C7B9/333333?text=Mimi","Próximo ao Capim Dourado Shopping","10/09/2025","encontrado"
3,"Thor","cachorro","Golden Retriever","Dourado","grande","https://placehold.co/400x400/E5C992/333333?text=Thor","Parque Cesamar","05/09/2025","perdido"
4,"Luna","gato","Vira-lata","Cinza","pequeno","https://placehold.co/400x400/B2B2B2/FFFFFF?text=Luna","Praça dos Girassóis","09/09/2025","encontrado"
5,"Billy","cachorro","Poodle","Branco","pequeno","https://placehold.co/400x400/FFFFFF/333333?text=Billy","Jardim Aureny III","07/09/2025","perdido"
6,"Frajola","gato","Vira-lata","Preto e Branco","medio","https://placehold.co/400x400/404040/FFFFFF?text=Frajola","Orla de Palmas","10/09/2025","encontrado"
7,"Bolinha","cachorro","Poodle","Branco","pequeno","https://placehold.co/400x400/FFFFFF/333333?text=Bolinha","Avenida JK","11/09/2025","perdido"
`;

        const parseCSV = (csvText) => {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',');
            const pets = [];

            for (let i = 1; i < lines.length; i++) {
                // Regex para separar por vírgulas, mas ignorar vírgulas dentro de aspas
                const values = lines[i].match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g).map(val => val.replace(/"/g, ''));
                
                const petObject = {};
                headers.forEach((header, index) => {
                    petObject[header] = values[index];
                });
                petObject.id = parseInt(petObject.id, 10); // Garante que o ID é um número
                pets.push(petObject);
            }
            return pets;
        };


        // --- COMPONENTES REACT (Modularizados) ---

        const Header = ({ onLoginClick, onNavigateToHome, onAnunciarClick }) => {
            return (
                <header className="bg-white shadow-sm sticky top-0 z-10">
                    <div className="container mx-auto px-4 py-3 flex justify-between items-center">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={onNavigateToHome}>
                            <i data-lucide="paw-print" className="text-orange-500"></i>
                            <h1 className="text-xl font-bold text-gray-800">Encontre seu Pet</h1>
                        </div>
                        <div className="flex items-center gap-2">
                            <a href="./cadastrar-pet.html" className="hidden md:flex items-center gap-2 bg-orange-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors">
                                <i data-lucide="plus-circle" className="w-5 h-5"></i>
                                Anunciar Pet
                            </a>
                             <button onClick={onLoginClick} className="flex items-center gap-2 bg-gray-200 text-gray-700 font-semibold px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors">
                                <i data-lucide="log-in" className="w-5 h-5"></i>
                                <span className="hidden md:inline">Login</span>
                            </button>
                        </div>
                    </div>
                </header>
            );
        };

        const PetCard = ({ pet }) => {
            const isPerdido = pet.status === 'perdido';
            const statusBgColor = isPerdido ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800';
            const statusBorderColor = isPerdido ? 'border-red-500' : 'border-green-500';
            
            return (
                <div className={`bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 border-t-4 ${statusBorderColor}`}>
                    <img className="h-48 w-full object-cover" src={pet.fotoUrl} alt={`Foto do pet ${pet.nome}`} />
                    <div className="p-4">
                        <div className="flex justify-between items-center mb-2">
                            <p className={`px-3 py-1 text-xs font-semibold rounded-full ${statusBgColor}`}>
                                {isPerdido ? 'PERDIDO' : 'ENCONTRADO'}
                            </p>
                            <p className="text-xs text-gray-500">{pet.data}</p>
                        </div>
                        <h2 className="text-lg font-bold text-gray-900">{pet.nome}</h2>
                        <p className="text-sm text-gray-600">{pet.raca}, {pet.cor}</p>
                        <div className="mt-3 flex items-center text-sm text-gray-500">
                             <i data-lucide="map-pin" className="w-4 h-4 mr-2 text-gray-400"></i>
                             <span>{pet.local}</span>
                        </div>
                    </div>
                    <div className="px-4 pb-4">
                        <button className="w-full bg-orange-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center gap-2">
                             <i data-lucide="message-circle" className="w-5 h-5"></i>
                             Entrar em Contato
                        </button>
                    </div>
                </div>
            );
        };
        
        const Filters = ({ activeFilter, setActiveFilter, setSearchTerm }) => {
             const baseButtonClasses = "px-4 py-2 rounded-lg font-semibold transition-colors w-full md:w-auto text-sm";
             const activeButtonClasses = "bg-orange-500 text-white shadow";
             const inactiveButtonClasses = "bg-white text-gray-700 hover:bg-gray-100";

            return (
                <div className="bg-white p-4 rounded-xl shadow-sm mb-8">
                    <div className="flex flex-col md:flex-row gap-4">
                        <div className="relative flex-grow">
                             <i data-lucide="search" className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                             <input 
                                type="text" 
                                placeholder="Busque por raça, cor, bairro..."
                                className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                onChange={(e) => setSearchTerm(e.target.value)}
                             />
                        </div>
                        <div className="flex gap-2">
                             <button 
                                onClick={() => setActiveFilter('todos')}
                                className={`${baseButtonClasses} ${activeFilter === 'todos' ? activeButtonClasses : inactiveButtonClasses}`}
                            >
                                Todos
                            </button>
                            <button 
                                onClick={() => setActiveFilter('perdido')}
                                className={`${baseButtonClasses} ${activeFilter === 'perdido' ? activeButtonClasses : inactiveButtonClasses}`}
                            >
                                Perdidos
                            </button>
                             <button 
                                onClick={() => setActiveFilter('encontrado')}
                                className={`${baseButtonClasses} ${activeFilter === 'encontrado' ? activeButtonClasses : inactiveButtonClasses}`}
                            >
                                Encontrados
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        const HomePage = ({ pets, activeFilter, searchTerm, setSearchTerm, setActiveFilter }) => {
             const filteredPets = pets
                .filter(pet => activeFilter === 'todos' || pet.status === activeFilter)
                .filter(pet => {
                    const searchLower = searchTerm.toLowerCase();
                    return !searchTerm || Object.values(pet).some(val => 
                        String(val).toLowerCase().includes(searchLower)
                    );
                });
            
            return (
                <main className="container mx-auto p-4 md:p-8">
                    <Filters 
                        activeFilter={activeFilter} 
                        setActiveFilter={setActiveFilter}
                        setSearchTerm={setSearchTerm}
                    />
                    {filteredPets.length > 0 ? (
                         <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            {filteredPets.map(pet => <PetCard key={pet.id} pet={pet} />)}
                        </div>
                    ) : (
                        <div className="text-center py-16 px-4 bg-white rounded-lg shadow-sm">
                            <i data-lucide="search-x" className="w-16 h-16 mx-auto text-gray-300"></i>
                            <h3 className="mt-4 text-xl font-semibold text-gray-700">Nenhum pet encontrado</h3>
                            <p className="mt-1 text-gray-500">Tente ajustar seus filtros ou o termo de busca.</p>
                        </div>
                    )}
                </main>
            )
        }

        const App = () => {
            // Os dados dos pets agora vêm do CSV
            const [pets] = React.useState(() => parseCSV(csvData));
            const [activeFilter, setActiveFilter] = React.useState('todos');
            const [searchTerm, setSearchTerm] = React.useState('');

            React.useEffect(() => {
                lucide.createIcons();
            }); // Executa a cada renderização para garantir que todos os ícones apareçam
            
            return (
                 <div>
                    <Header />
                    <HomePage
                        pets={pets}
                        activeFilter={activeFilter}
                        setActiveFilter={setActiveFilter}
                        searchTerm={searchTerm}
                        setSearchTerm={setSearchTerm}
                    />
                </div>
            );
        };

        // --- RENDERIZAÇÃO DA APLICAÇÃO ---
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>

